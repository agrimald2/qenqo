import{o as d,f as i,a as p,u as w,w as b,F as h,Z as y,b as e,t as l,h as u,m as c,k as m,d as v,g as S,E as k,G as x}from"./app-a7ca0acf.js";import{A as U}from"./AuthenticatedLayout-c6bcfa3f.js";import{B as g}from"./Breadcrumb-08f68482.js";import{L as f}from"./Loader-783adae2.js";import{_ as V}from"./_plugin-vue_export-helper-c27b6911.js";const o=s=>(k("data-v-56474e9b"),s=s(),x(),s),T={class:"shadow-md sm:rounded-lg relative grid grid-cols-2"},L={class:"p-4 flex items-center justify-between bg-white col-span-2"},M={class:"overflow-x-auto p-4 col-span-2"},B={class:"grid grid-cols-4 gap-6"},I={class:"block col-span-2 md:col-span-1"},C=o(()=>e("span",{class:"text-gray-700"},"Modalidad",-1)),D=["value"],N={class:"block col-span-2 md:col-span-1"},j=o(()=>e("span",{class:"text-gray-700"},"Día de la semana",-1)),F=["value"],A={class:"block col-span-4 md:col-span-1 text-center"},E=o(()=>e("span",{class:"text-gray-700"},"Hora de Inicio",-1)),H=o(()=>e("br",null,null,-1)),$={class:"inline-flex text-lg border rounded-md shadow-lg p-2"},q=o(()=>e("option",{value:"00"},"00",-1)),G=o(()=>e("option",{value:"01"},"01",-1)),J=o(()=>e("option",{value:"02"},"02",-1)),O=o(()=>e("option",{value:"03"},"03",-1)),Q=o(()=>e("option",{value:"04"},"04",-1)),Z=o(()=>e("option",{value:"05"},"05",-1)),z=o(()=>e("option",{value:"06"},"06",-1)),K=o(()=>e("option",{value:"07"},"07",-1)),P=o(()=>e("option",{value:"08"},"08",-1)),R=o(()=>e("option",{value:"09"},"09",-1)),W=o(()=>e("option",{value:"10"},"10",-1)),X=o(()=>e("option",{value:"11"},"11",-1)),Y=o(()=>e("option",{value:"12"},"12",-1)),ee=o(()=>e("option",{value:"13"},"13",-1)),oe=o(()=>e("option",{value:"14"},"14",-1)),te=o(()=>e("option",{value:"15"},"15",-1)),se=o(()=>e("option",{value:"16"},"16",-1)),ne=o(()=>e("option",{value:"17"},"17",-1)),ae=o(()=>e("option",{value:"18"},"18",-1)),de=o(()=>e("option",{value:"19"},"19",-1)),ie=o(()=>e("option",{value:"20"},"20",-1)),le=o(()=>e("option",{value:"21"},"21",-1)),re=o(()=>e("option",{value:"22"},"22",-1)),ue=o(()=>e("option",{value:"23"},"23",-1)),ce=[q,G,J,O,Q,Z,z,K,P,R,W,X,Y,ee,oe,te,se,ne,ae,de,ie,le,re,ue],_e=o(()=>e("span",{class:"px-2"},":",-1)),he=o(()=>e("option",{value:"00"},"00",-1)),pe=o(()=>e("option",{value:"15"},"15",-1)),me=o(()=>e("option",{value:"15"},"30",-1)),ve=[he,pe,me],ge={class:"block col-span-4 md:col-span-1 text-center"},fe=o(()=>e("span",{class:"text-gray-700"},"Hora de Final",-1)),we=o(()=>e("br",null,null,-1)),be={class:"inline-flex text-lg border rounded-md shadow-lg p-2"},ye=o(()=>e("option",{value:"00"},"00",-1)),Se=o(()=>e("option",{value:"01"},"01",-1)),ke=o(()=>e("option",{value:"02"},"02",-1)),xe=o(()=>e("option",{value:"03"},"03",-1)),Ue=o(()=>e("option",{value:"04"},"04",-1)),Ve=o(()=>e("option",{value:"05"},"05",-1)),Te=o(()=>e("option",{value:"06"},"06",-1)),Le=o(()=>e("option",{value:"07"},"07",-1)),Me=o(()=>e("option",{value:"08"},"08",-1)),Be=o(()=>e("option",{value:"09"},"09",-1)),Ie=o(()=>e("option",{value:"10"},"10",-1)),Ce=o(()=>e("option",{value:"11"},"11",-1)),De=o(()=>e("option",{value:"12"},"12",-1)),Ne=o(()=>e("option",{value:"13"},"13",-1)),je=o(()=>e("option",{value:"14"},"14",-1)),Fe=o(()=>e("option",{value:"15"},"15",-1)),Ae=o(()=>e("option",{value:"16"},"16",-1)),Ee=o(()=>e("option",{value:"17"},"17",-1)),He=o(()=>e("option",{value:"18"},"18",-1)),$e=o(()=>e("option",{value:"19"},"19",-1)),qe=o(()=>e("option",{value:"20"},"20",-1)),Ge=o(()=>e("option",{value:"21"},"21",-1)),Je=o(()=>e("option",{value:"22"},"22",-1)),Oe=o(()=>e("option",{value:"23"},"23",-1)),Qe=[ye,Se,ke,xe,Ue,Ve,Te,Le,Me,Be,Ie,Ce,De,Ne,je,Fe,Ae,Ee,He,$e,qe,Ge,Je,Oe],Ze=o(()=>e("span",{class:"px-2"},":",-1)),ze=o(()=>e("option",{value:"00"},"00",-1)),Ke=o(()=>e("option",{value:"15"},"15",-1)),Pe=o(()=>e("option",{value:"15"},"30",-1)),Re=[ze,Ke,Pe],We={class:"shadow-md sm:rounded-lg relative mt-10"},Xe={class:"card-container overflow-x-auto grid md:grid-cols-1 lg:grid-cols-3"},Ye={class:"w-full max-w-sm bg-white border border-gray-200 rounded-lg shadow sm:p-8 dark:bg-gray-800 dark:border-gray-700"},eo={class:"w-full text-white bg-gray-800 hover:bg-gray-900 focus:outline-none focus:ring-4 focus:ring-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2"},oo={key:0,class:"items-center"},to=["onClick"],so={key:1},no={key:2,role:"status",class:"flex justify-center p-10"},ao={components:{Breadcrumb:g,Loader:f},props:["breadcrumbs","user_id","user"],data(){return{param:null,schedules:[],days_of_the_week:[{name:"Lunes"},{name:"Martes"},{name:"Miércoles"},{name:"Jueves"},{name:"Viernes"},{name:"Sábado"},{name:"Domingo"}],modalities:[],newSchedule:{user_id:this.user_id,modality_id:1,week_day:1,start_hour:"06",start_minute:"00",end_hour:"06",end_minute:"00"}}},methods:{showModal(s){let t=document.getElementById(s);t.classList.remove("slide-out-bck-center"),t.classList.remove("no-display")},async delete(s){try{const t=await axios.delete("/rates/"+s);this.fetch()}catch(t){console.log(t)}},async addScheduleToUser(){this.newSchedule.start_time=this.newSchedule.start_hour+":"+this.newSchedule.start_minute,this.newSchedule.end_time=this.newSchedule.end_hour+":"+this.newSchedule.end_minute;try{const s=await axios.post("/addScheduleToUser",this.newSchedule);this.fetch()}catch(s){console.log(s)}},async deleteSchedule(s){try{const t=await axios.delete("/deleteSchedule/"+s);this.fetch()}catch(t){console.log(t)}},async fetch(){try{const s=await axios.get("/getUserSchedules",{params:{user_id:this.user_id}});this.schedules=s.data}catch(s){console.log(s)}},async getModalities(){try{const s=await axios.get("/api/getModalities",{params:{}});this.modalities=s.data}catch(s){console.log(s)}},formatTime(s){return new Date(`1970-01-01T${s}`).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}},mounted(){this.fetch(),this.getModalities()},watch:{searchQuery:{handler(){this.fetch()},immediate:!0}},computed:{groupedSchedules(){return this.schedules.reduce((s,t)=>{const a=t.week_day;return s[a]||(s[a]=[]),s[a].push(t),s},{})}}},io=Object.assign(ao,{__name:"UserSchedule",setup(s){return(t,a)=>(d(),i(h,null,[p(w(y),{title:"Familias"}),p(U,null,{default:b(()=>[p(g,{breadcrumbs:s.breadcrumbs},null,8,["breadcrumbs"]),e("div",T,[e("div",L," Horarios del entrenador - "+l(s.user.name)+" "+l(s.user.lastname),1),e("div",M,[e("div",B,[e("label",I,[C,u(e("select",{class:"mt-1 block w-full rounded-md shadow-sm focus:ring-purple-500 focus:border-purple-500 sm:text-sm border-gray-300","onUpdate:modelValue":a[0]||(a[0]=n=>t.newSchedule.modality_id=n)},[(d(!0),i(h,null,m(t.modalities,n=>(d(),i("option",{value:n.id},l(n.name),9,D))),256))],512),[[c,t.newSchedule.modality_id]])]),e("label",N,[j,u(e("select",{class:"mt-1 block w-full rounded-md shadow-sm focus:ring-purple-500 focus:border-purple-500 sm:text-sm border-gray-300","onUpdate:modelValue":a[1]||(a[1]=n=>t.newSchedule.week_day=n)},[(d(!0),i(h,null,m(t.days_of_the_week,(n,r)=>(d(),i("option",{value:r+1},l(n.name),9,F))),256))],512),[[c,t.newSchedule.week_day]])]),e("label",A,[E,v(),H,e("div",$,[u(e("select",{name:"",id:"",class:"px-2 outline-none appearance-none bg-transparent rounded","onUpdate:modelValue":a[2]||(a[2]=n=>t.newSchedule.start_hour=n)},ce,512),[[c,t.newSchedule.start_hour]]),_e,u(e("select",{name:"",id:"",class:"px-2 outline-none appearance-none bg-transparent rounded","onUpdate:modelValue":a[3]||(a[3]=n=>t.newSchedule.start_minute=n)},ve,512),[[c,t.newSchedule.start_minute]])])]),e("label",ge,[fe,v(),we,e("div",be,[u(e("select",{name:"",id:"",class:"px-2 outline-none appearance-none bg-transparent rounded","onUpdate:modelValue":a[4]||(a[4]=n=>t.newSchedule.end_hour=n)},Qe,512),[[c,t.newSchedule.end_hour]]),Ze,u(e("select",{name:"",id:"",class:"px-2 outline-none appearance-none bg-transparent rounded","onUpdate:modelValue":a[5]||(a[5]=n=>t.newSchedule.end_minute=n)},Re,512),[[c,t.newSchedule.end_minute]])])]),e("button",{onClick:a[6]||(a[6]=n=>t.addScheduleToUser()),class:"col-span-4 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500"}," Añadir Bloque ")])])]),e("div",We,[e("div",Xe,[(d(!0),i(h,null,m(t.days_of_the_week,(n,r)=>(d(),i("div",{key:r,class:"card my-2 mx-2"},[e("div",Ye,[e("div",eo,l(n.name),1),e("ul",null,[t.groupedSchedules[r+1]&&t.groupedSchedules[r+1].length?(d(),i("li",oo,[(d(!0),i(h,null,m(t.groupedSchedules[r+1],_=>(d(),i("div",{key:_.id,class:"cursor-pointer w-full text-white bg-purple-800 hover:bg-purple-900 focus:outline-none focus:ring-4 focus:ring-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2"},[v(l(t.formatTime(_.start_time))+" - "+l(t.formatTime(_.end_time))+" | "+l(_.modality.name)+" ",1),e("i",{class:"ml-4 fa-solid fa-trash-can text-xl hover:text-red-500",onClick:lo=>t.deleteSchedule(_.id)},null,8,to)]))),128))])):(d(),i("li",so," No hay horarios para este día ")),t.schedules.length==0?(d(),i("div",no,[p(f)])):S("",!0)])])]))),128))])])]),_:1})],64))}}),po=V(io,[["__scopeId","data-v-56474e9b"]]);export{po as default};

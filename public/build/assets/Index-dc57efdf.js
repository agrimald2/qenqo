import{o as l,f as n,a as i,u as _,w as m,F as d,Z as f,b as e,h as y,v as x,k as b,d as c,t as a}from"./app-a7ca0acf.js";import{A as g}from"./AuthenticatedLayout-c6bcfa3f.js";import{B as u}from"./Breadcrumb-08f68482.js";import{L as p}from"./Loader-783adae2.js";import"./_plugin-vue_export-helper-c27b6911.js";const w={class:"shadow-md sm:rounded-lg relative"},v={class:"px-2 flex items-center justify-between py-4 bg-white"},k={class:"flex items-center"},C={class:"relative w-full"},N=e("span",{class:"hidden md:flex"}," Nuevo ",-1),B=e("i",{class:"ml-2 fa-solid fa-user-plus font-xl"},null,-1),I=[N,B],L={class:"overflow-x-auto"},E={key:0,class:"w-full text-sm text-left text-gray-500 table"},Q=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"}," Nombre "),e("th",{scope:"col",class:"px-6 py-3"}," Celular "),e("th",{scope:"col",class:"px-6 py-3"}," Email "),e("th",{scope:"col",class:"px-6 py-3"}," Tarifa Activa "),e("th",{scope:"col",class:"px-6 py-3"}," Acciones ")])],-1),q={class:"bg-white border-b hover:bg-gray-50"},A={scope:"row",class:"flex items-center px-6 py-4 text-gray-900 whitespace-nowrap"},M={class:"text-base font-semibold"},T=e("br",null,null,-1),V={class:"px-6 py-4"},j={class:"px-6 py-4"},D=e("br",null,null,-1),$={key:0,class:"px-6 py-4"},F={class:"text-gray-700 whitespace-nowrap"},O=e("br",null,null,-1),S={key:1,class:"px-6 py-4"},U={class:"px-6 py-4"},Z=["href"],z=e("i",{class:"fa-solid fa-brands fa-ethereum text-3xl text-green-500 cursor-pointer ml-2"},null,-1),G=[z],H={key:1,role:"status",class:"flex justify-center p-10"},J={components:{Breadcrumb:u,Loader:p},props:["breadcrumbs"],data(){return{param:null,customers:null,searchQuery:null}},methods:{showModal(r){let s=document.getElementById(r);s.classList.remove("slide-out-bck-center"),s.classList.remove("no-display")},async delete(r){try{const s=await axios.delete("/customers/"+r);this.fetch()}catch(s){console.log(s)}},async fetch(){this.customers=null;try{const r=await axios.get("/getCustomers",{params:{query:this.searchQuery}});this.customers=r.data}catch(r){console.log(r)}}},mounted(){this.fetch()},watch:{searchQuery:{handler(){this.fetch()},immediate:!0}}},ee=Object.assign(J,{__name:"Index",setup(r){return(s,o)=>(l(),n(d,null,[i(_(f),{title:"Clientes"}),i(g,null,{default:m(()=>[i(u,{breadcrumbs:r.breadcrumbs},null,8,["breadcrumbs"]),e("div",w,[e("div",v,[e("div",k,[e("div",C,[y(e("input",{type:"text",id:"simple-search","onUpdate:modelValue":o[0]||(o[0]=t=>s.searchQuery=t),onInput:o[1]||(o[1]=(...t)=>s.fetch&&s.fetch(...t)),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-purple-500 focus:border-purple-500 block w-full pl-10 p-2.5 dark:placeholder-gray-400 dark:focus:ring-purple-500 dark:focus:border-purple-500",placeholder:"Nombre | NÂ° Doc",required:""},null,544),[[x,s.searchQuery]])])]),e("button",{type:"button",onClick:o[2]||(o[2]=t=>s.showModal("createCustomer")),class:"text-white bg-purple-800 hover:bg-[#050708]/80 focus:ring-4 focus:outline-none focus:ring-[#050708]/50 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center dark:focus:ring-gray-600 mr-2 mb-2"},I)]),e("div",L,[s.customers?(l(),n("table",E,[Q,e("tbody",null,[(l(!0),n(d,null,b(s.customers,(t,K)=>(l(),n("tr",q,[e("th",A,[e("div",M,[c(a(t.name)+" "+a(t.lastname)+" ",1),T,c(" "+a(t.dni),1)])]),e("td",V,a(t.phone),1),e("td",j,[c(a(t.birthdate)+" ",1),D,c(" "+a(t.sex),1)]),t.last_customer_rate?(l(),n("td",$,[e("span",F,a(t.last_customer_rate.rate_name)+" - S/"+a(t.last_customer_rate.rate_total_price),1),c(),O,c(" "+a(t.last_customer_rate.rate_total_sessions)+" | "+a(t.last_customer_rate.rate_total_sessions*t.last_customer_rate.total_consumed/t.last_customer_rate.rate_total_price),1)])):(l(),n("td",S," NO TIENE ")),e("td",U,[e("a",{href:"/customers/"+t.id+"/rates"},G,8,Z),e("i",{onClick:o[3]||(o[3]=h=>s.showModal("editInsuranceCompany"+s.insurance_company.id)),class:"fa-solid fa-square-pen text-3xl text-yellow-500 cursor-pointer ml-2"}),e("i",{onClick:o[4]||(o[4]=h=>s.deleteInsuranceCompany(s.insurance_company.id)),class:"fa-solid fa-square-xmark text-3xl text-red-500 cursor-pointer ml-2"})])]))),256))])])):(l(),n("div",H,[i(p)]))])])]),_:1})],64))}});export{ee as default};

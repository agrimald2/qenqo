import{o as r,f as n,a as i,u as _,w as h,F as d,Z as y,b as s,h as f,v as x,k as b,d as c,t as l}from"./app-a7ca0acf.js";import{A as g}from"./AuthenticatedLayout-c6bcfa3f.js";import{B as u}from"./Breadcrumb-08f68482.js";import{L as p}from"./Loader-783adae2.js";import w from"./PayCustomerRate-d4f59866.js";import"./_plugin-vue_export-helper-c27b6911.js";const v={class:"shadow-md sm:rounded-lg relative"},k={class:"px-2 flex items-center justify-between py-4 bg-white"},C={class:"flex items-center"},N={class:"relative w-full"},B=s("span",{class:"hidden md:flex"}," Nuevo ",-1),L=s("i",{class:"ml-2 fa-solid fa-user-plus font-xl"},null,-1),F=[B,L],I={class:"overflow-x-auto"},P={key:0,class:"w-full text-sm text-left text-gray-500 table"},Q=s("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50"},[s("tr",null,[s("th",{scope:"col",class:"px-6 py-3"}," Tarifa "),s("th",{scope:"col",class:"px-6 py-3"}," Sesiones "),s("th",{scope:"col",class:"px-6 py-3"}," Ev. Nutricional "),s("th",{scope:"col",class:"px-6 py-3"}," F. Inicio "),s("th",{scope:"col",class:"px-6 py-3"}," F. Final "),s("th",{scope:"col",class:"px-6 py-3"}," Status "),s("th",{scope:"col",class:"px-6 py-3"}," Acciones ")])],-1),M={class:"bg-white border-b hover:bg-gray-50"},R={scope:"row",class:"flex items-center px-6 py-4 text-gray-900 whitespace-nowrap"},S=["href"],T={class:"text-base font-semibold"},V=s("br",null,null,-1),j={class:"px-6 py-4"},q=s("br",null,null,-1),A=s("br",null,null,-1),D={key:0,class:"px-6 py-4"},E=s("br",null,null,-1),$={key:1,class:"px-6 py-4"},O={class:"px-6 py-4"},U={class:"px-6 py-4"},Z={class:"px-6 py-4"},z={class:"px-6 py-4"},G=["onClick"],H=s("i",{class:"fa-solid fa-face-frown text-3xl text-red-500 cursor-pointer ml-2"},null,-1),J={key:1,role:"status",class:"flex justify-center p-10"},K={components:{Breadcrumb:u,Loader:p},props:["breadcrumbs","customer_rates"],data(){return{param:null,customers:null,searchQuery:null}},methods:{showModal(o){let t=document.getElementById(o);t.classList.remove("slide-out-bck-center"),t.classList.remove("no-display")},async delete(o){try{const t=await axios.delete("/customers/"+o);this.fetch()}catch(t){console.log(t)}},async fetch(){this.customers=null;try{const o=await axios.get("/getCustomers",{params:{query:this.searchQuery}});this.customers=o.data}catch(o){console.log(o)}}},mounted(){this.fetch()},watch:{searchQuery:{handler(){this.fetch()},immediate:!0}}},ls=Object.assign(K,{__name:"CustomerRates",setup(o){return(t,a)=>(r(),n(d,null,[i(_(y),{title:"Clientes"}),i(g,null,{default:h(()=>[i(u,{breadcrumbs:o.breadcrumbs},null,8,["breadcrumbs"]),s("div",v,[s("div",k,[s("div",C,[s("div",N,[f(s("input",{type:"text",id:"simple-search","onUpdate:modelValue":a[0]||(a[0]=e=>t.searchQuery=e),onInput:a[1]||(a[1]=(...e)=>t.fetch&&t.fetch(...e)),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-purple-500 focus:border-purple-500 block w-full pl-10 p-2.5 dark:placeholder-gray-400 dark:focus:ring-purple-500 dark:focus:border-purple-500",placeholder:"Nombre | NÂ° Doc",required:""},null,544),[[x,t.searchQuery]])])]),s("button",{type:"button",onClick:a[2]||(a[2]=e=>t.showModal("createCustomer")),class:"text-white bg-purple-800 hover:bg-[#050708]/80 focus:ring-4 focus:outline-none focus:ring-[#050708]/50 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center dark:focus:ring-gray-600 mr-2 mb-2"},F)]),s("div",I,[o.customer_rates?(r(),n("table",P,[Q,s("tbody",null,[(r(!0),n(d,null,b(o.customer_rates,(e,W)=>(r(),n("tr",M,[s("th",R,[s("a",{href:"/customers/rates/"+e.id},[s("div",T,[c(l(e.rate_name)+" ",1),V,c(" S/"+l(e.rate_total_price),1)])],8,S)]),s("td",j,[c(" T - "+l(e.rate_total_sessions)+" ",1),q,c(" C - "+l(e.rate_total_sessions*e.total_consumed/e.rate_total_price)+" ",1),A,c(" P - "+l(e.rate_total_sessions*e.total_payed/e.rate_total_price),1)]),e.nutritional_assessment_total>0?(r(),n("td",D,[c(" P - "+l(e.nutritional_assessment_total)+" ",1),E,c(" C - "+l(e.nutritional_assessment_consumed),1)])):(r(),n("td",$," NO Incluye ")),s("td",O,l(e.start_day),1),s("td",U,l(e.end_day),1),s("td",Z,l(e.status.name),1),s("td",z,[s("i",{class:"fa-brands fa-cc-apple-pay text-3xl text-yellow-500 cursor-pointer ml-2",onClick:m=>t.showModal("PayCustomerRate"+e.id)},null,8,G),H,s("i",{onClick:a[3]||(a[3]=m=>t.deleteInsuranceCompany(t.insurance_company.id)),class:"fa-solid fa-square-xmark text-3xl text-red-800 cursor-pointer ml-2"})]),i(w,{id:"PayCustomerRate"+e.id,rate:e},null,8,["id","rate"])]))),256))])])):(r(),n("div",J,[i(p)]))])])]),_:1})],64))}});export{ls as default};

import{o as l,f as r,a as i,u as y,w as g,F as d,Z as x,b as e,h as c,v as b,m as _,k as u,t as n}from"./app-a7ca0acf.js";import{A as k}from"./AuthenticatedLayout-c6bcfa3f.js";import{B as p}from"./Breadcrumb-08f68482.js";import{L as m}from"./Loader-783adae2.js";import h from"./Edit-1fcda57e.js";import w from"./Create-85cc7bc6.js";import"./_plugin-vue_export-helper-c27b6911.js";const v={class:"shadow-md sm:rounded-lg relative"},F={class:"px-2 flex items-center justify-between py-4 bg-white"},C={class:"flex items-center"},B={class:"relative w-full"},M=e("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[e("svg",{class:"w-4 h-4 text-gray-500","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 20"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5v10M3 5a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 10a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm12 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm0 0V6a3 3 0 0 0-3-3H9m1.5-2-2 2 2 2"})])],-1),N=e("option",{value:0,class:"text-gray-900",selected:""},"Todas",-1),S=["value"],L={class:"hidden md:flex"},Q=e("i",{class:"ml-2 fa-solid fa-user-plus font-xl"},null,-1),V={class:"overflow-x-auto"},j={key:0,class:"w-full text-sm text-left text-gray-500 table"},q=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"}," Familia "),e("th",{scope:"col",class:"px-6 py-3"}," Nombre "),e("th",{scope:"col",class:"px-6 py-3"}," ¿Habilitada? "),e("th",{scope:"col",class:"px-6 py-3"}," ¿Permiso de Admin? "),e("th",{scope:"col",class:"px-6 py-3"}," Acciones ")])],-1),A={class:"bg-white border-b hover:bg-gray-50"},Z={scope:"row",class:"flex items-center px-6 py-4 text-gray-900 whitespace-nowrap"},E={class:"pl-3"},I={class:"text-base font-semibold"},O={class:"px-6 py-4"},$={class:"px-6 py-4"},D={key:0,class:"bg-green-100 text-green-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded dark:bg-green-900 dark:text-green-300"},H={key:1,class:"bg-red-100 text-red-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded dark:bg-red-900 dark:text-red-300"},T={class:"px-6 py-4"},U={key:0,class:"bg-purple-100 text-purple-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded dark:bg-purple-900 dark:text-purple-300"},P={key:1,class:"bg-yellow-100 text-yellow-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded dark:bg-yellow-900 dark:text-yellow-300"},z={class:"px-6 py-4"},G=["onClick"],J=["onClick"],K={key:1,role:"status",class:"flex justify-center p-10"},R={components:{Breadcrumb:p,Loader:m,Edit:h},props:["breadcrumbs"],data(){return{subfamilies:null,searchQuery:null,family_id:null,families:null}},methods:{showModal(o){let s=document.getElementById(o);console.log(o),s.classList.remove("slide-out-bck-center"),s.classList.remove("no-display")},async deleteFamily(o){try{const s=await axios.delete("/subfamilies/"+o);this.fetch()}catch(s){console.log(s)}},async fetch(){this.subfamilies=null;try{const o=await axios.get("/getSubFamilies",{params:{name:this.searchQuery,family_id:this.family_id}});this.subfamilies=o.data}catch(o){console.log(o)}},async getFamilies(){this.families=null;try{const o=await axios.get("/getFamilies",{params:{}});this.families=o.data}catch(o){console.log(o)}}},mounted(){this.fetch(),this.getFamilies()},watch:{searchQuery:{handler(){this.fetch()},immediate:!0}}},re=Object.assign(R,{__name:"Index",setup(o){return(s,a)=>(l(),r(d,null,[i(y(x),{title:"Familias"}),i(k,null,{default:g(()=>[i(p,{breadcrumbs:o.breadcrumbs},null,8,["breadcrumbs"]),e("div",v,[e("div",F,[e("div",C,[e("div",B,[M,c(e("input",{type:"text",id:"simple-search","onUpdate:modelValue":a[0]||(a[0]=t=>s.searchQuery=t),onInput:a[1]||(a[1]=(...t)=>s.fetch&&s.fetch(...t)),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-purple-500 focus:border-purple-500 block w-full pl-10 p-2.5 dark:placeholder-gray-400 dark:focus:ring-purple-500 dark:focus:border-purple-500",placeholder:"Nombre",required:""},null,544),[[b,s.searchQuery]])]),c(e("select",{id:"families",name:"families","onUpdate:modelValue":a[2]||(a[2]=t=>s.family_id=t),onChange:a[3]||(a[3]=(...t)=>s.fetch&&s.fetch(...t)),class:"ml-2 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-purple-500 focus:border-purple-500 block w-full p-2.5 dark:placeholder-gray-400 dark:focus:ring-purple-500 dark:focus:border-purple-500"},[N,(l(!0),r(d,null,u(s.families,t=>(l(),r("option",{value:t.id,class:"text-gray-900"},n(t.name),9,S))),256))],544),[[_,s.family_id]])]),e("button",{type:"button",onClick:a[4]||(a[4]=t=>s.showModal("createFamily")),class:"text-white bg-purple-800 hover:bg-[#050708]/80 focus:ring-4 focus:outline-none focus:ring-[#050708]/50 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center dark:focus:ring-gray-600 mr-2 mb-2"},[e("span",L," Nuevo "+n(s.family_id),1),Q])]),e("div",V,[s.subfamilies?(l(),r("table",j,[q,e("tbody",null,[(l(!0),r(d,null,u(s.subfamilies,(t,W)=>(l(),r("tr",A,[e("th",Z,[e("div",E,[e("div",I,n(t.family.name),1)])]),e("td",O,n(t.name),1),e("td",$,[t.is_enabled?(l(),r("span",D,"SÍ")):(l(),r("span",H,"NO"))]),e("td",T,[t.required_admin_permission?(l(),r("span",U,"SÍ")):(l(),r("span",P,"NO"))]),e("td",z,[e("i",{onClick:f=>s.showModal("editSubFamily"+t.id),class:"fa-solid fa-square-pen text-3xl text-yellow-500 cursor-pointer ml-2"},null,8,G),i(h,{id:"editSubFamily"+t.id,subfamily:t},null,8,["id","subfamily"]),e("i",{onClick:f=>s.deleteFamily(t.id),class:"fa-solid fa-square-xmark text-3xl text-red-500 cursor-pointer ml-2"},null,8,J)])]))),256))])])):(l(),r("div",K,[i(m)]))]),i(w,{id:"createFamily"})])]),_:1})],64))}});export{re as default};
